<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title></title>
	<!-- Materialize CSS Reference -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">
	<!-- Materialize Icon Reference -->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
	<div class="container">

		<div class="row">
			<form class="col s12">
				<div class="row">
					<div class="col s12">
						<h4>About You</h4>
						<hr/>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<i class="material-icons prefix">account_circle</i>
						<input id="name" type="text" class="validate">
						<label for="name">Name (Required)</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<i class="material-icons prefix">picture_in_picture</i>
						<input id="link" type="text" class="validate">
						<label for="link">Link to Photo Image (Required)</label>
					</div>
				</div>

				<div class="row">
					<div class="col s12">
						<h4>Survey Questions</h4>
						<hr/>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<p>Beer > Water</p>
						<select id="q1">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">Strongly Disagree</option>
                            <option value="2">Disagree</option>
                            <option value="3">Maybe</option>
							<option value="4">Agree</option>
                            <option value="5">Strongly Agree</option>
                        </select>
						<label>Question 1</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<p>Night-time Drinking > Day-time Drinking</p>
						<select id="q2">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">Strongly Disagree</option>
                            <option value="2">Disagree</option>
                            <option value="3">Maybe</option>
							<option value="4">Agree</option>
                            <option value="5">Strongly Agree</option>
                        </select>
						<label>Question 2</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<p>Domestic Beer > Imported Beer</p>
						<select id="q3">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">Strongly Disagree</option>
                            <option value="2">Disagree</option>
                            <option value="3">Maybe</option>
							<option value="4">Agree</option>
                            <option value="5">Strongly Agree</option>
                        </select>
						<label>Question 3</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<p>Texas Beer > Other State Beer</p>
						<select id="q4">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">Strongly Disagree</option>
                            <option value="2">Disagree</option>
                            <option value="3">Maybe</option>
							<option value="4">Agree</option>
                            <option value="5">Strongly Agree</option>
                        </select>
						<label>Question 4</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<p>Draft Beer > Bottled/Canned Beer</p>
						<select id="q5">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">Strongly Disagree</option>
                            <option value="2">Disagree</option>
                            <option value="3">Maybe</option>
							<option value="4">Agree</option>
                            <option value="5">Strongly Agree</option>
                        </select>
						<label>Question 5</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<p>Beer > Wine</p>
						<select id="q6">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">Strongly Disagree</option>
                            <option value="2">Disagree</option>
                            <option value="3">Maybe</option>
							<option value="4">Agree</option>
                            <option value="5">Strongly Agree</option>
                        </select>
						<label>Question 6</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<p>Beer > Liquor</p>
						<select id="q7">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">Strongly Disagree</option>
                            <option value="2">Disagree</option>
                            <option value="3">Maybe</option>
							<option value="4">Agree</option>
                            <option value="5">Strongly Agree</option>
                        </select>
						<label>Question 7</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<p>Lager > Ale</p>
						<select id="q8">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">Strongly Disagree</option>
                            <option value="2">Disagree</option>
                            <option value="3">Maybe</option>
							<option value="4">Agree</option>
                            <option value="5">Strongly Agree</option>
                        </select>
						<label>Question 8</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<p>Calamari and Beer > Chicken and Beer</p>
						<select id="q9">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">Strongly Disagree</option>
                            <option value="2">Disagree</option>
                            <option value="3">Maybe</option>
							<option value="4">Agree</option>
                            <option value="5">Strongly Agree</option>
                        </select>
						<label>Question 9</label>
					</div>
				</div>
				<div class="row">
					<div class="input-field col s12">
						<p>Beer 4 Life</p>
						<select id="q10">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">Strongly Disagree</option>
                            <option value="2">Disagree</option>
                            <option value="3">Maybe</option>
							<option value="4">Agree</option>
                            <option value="5">Strongly Agree</option>
                        </select>
						<label>Question 10</label>
					</div>
				</div>
				<div class="row">
					<div class="col s12">
						<a id="submit" class="waves-effect waves-light btn"><i class="material-icons left">done_all</i>Submit</a>
					</div>
				</div>
			</form>
		</div>
		<div class="row">
			<div class="col s12">
				<a href="api/friends">API Friends List</a> | <a href="https://github.com/dh24732/friend_finder">GitHub Repo</a>
			</div>
		</div>
	</div>
	<!-- Modal Structure -->
	<div id="modal1" class="modal">
		<div class="modal-content">
			<h4>Your Match!</h4>
				<h5 id="matchName"></h5>
				<img id="matchImg" class="materialboxed" width="300" src="">
		</div>
		<div class="modal-footer">
			<a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Like</a>
		</div>
	</div>
	<!-- jQuery Reference -->
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<!-- Javascript Reference -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>
	<script type="text/javascript">
        $(document).ready(function() {
			$('select').material_select();
			$('.modal').modal();
		});
		$("#submit").on("click", function(){
			// check for any empty field
			function checkEmpty(){
				// initialize boolean to return
				var isEmpty = false;
				// check for empty input
				$("input.validate").each(function(){
					if($(this).val() === ""){
						isEmpty = true;
					}
				});
				// check for empty select
				$("select.initialized").each(function(){
					if($(this).val() === null){
						isEmpty = true;
					}
				});
				return isEmpty;
			}
			// if any field is empty alert the user
			if(checkEmpty()){
				alert("Please fill out all fields before submitting.");
			}
			else {
				// create data object with user input
				var dataObj = {
					name: $("#name").val().trim(),
					photo: $("#link").val().trim(),
					scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(), ]
				}
				// current url address
				var currentURL = window.location.origin;
				// ajax send(post) data to Friends
				$.post(currentURL + "/api/friends", dataObj, function(data){
					// reset input/select fields
					$("#name").val("");
					$("#link").val("");

					// show modal
					$("#matchName").text(data.name);
					$("#matchImg").attr("src", data.photo);
					$("#modal1").modal("open");
				})
			}

		});
    </script>
</body>

</html>